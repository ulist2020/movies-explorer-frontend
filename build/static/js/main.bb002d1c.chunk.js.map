{"version":3,"sources":["components/Logo/Logo.js","images/logo.png","components/Navigation/Navigation.js","components/Header/Header.js","images/world.png","components/Main/Promo/Promo.js","components/Main/AboutProject/AboutProject.js","components/Main/Techs/Techs.js","images/photo.jpg","components/Main/AboutMe/AboutMe.js","components/Main/Portfolio/Portfolio.js","components/Main/Main.js","components/Movies/FilterCheckbox/FilterCheckbox.js","components/Movies/SearchForm/SearchForm.js","components/Movies/MoviesCard/MoviesCard.js","components/Movies/MoviesCardList/MoviesCardList.js","components/Movies/Preloader/Preloader.js","components/Movies/ButtonAdd/ButtonAdd.js","components/Movies/Movies.js","components/SavedMovies/SavedMovies.js","contexts/CurrentUserContext.js","utils/Validation.js","components/Profile/Profile.js","components/Register/ButtonRegister/ButtonRegister.js","components/Login/Login.js","components/Register/Register.js","components/PageNotFound/PageNotFound.js","components/Footer/Footer.js","components/PopupNav/PopupNav.js","utils/MoviesApi.js","utils/MainApi.js","utils/auth.js","components/ProtectedRoute/ProtectedRoute.js","components/InfoTooltip/InfoTooltip.js","components/App/App.js","reportWebVitals.js","index.js"],"names":["Logo","className","src","alt","Navigation","props","to","onClick","handleClick","Header","loggedIn","location","useLocation","pathname","exact","path","handleScroll","document","querySelector","scrollIntoView","Promo","image","AboutProject","href","Techs","AboutMe","Portfolio","Main","FilterCheckbox","onClickCheckbox","checkedShorts","id","checked","onChange","name","type","htmlFor","SearchForm","onUpdateForm","useState","movie","setMovie","onSubmit","e","preventDefault","value","target","placeholder","tape","minLength","maxLength","required","MoviesCard","min","card","nameRU","duration","isSavedMoviesPage","owner","onSavedMovies","onDeleteMovies","isSaved","cardLikeButtonClassName","window","open","trailer","style","backgroundImage","savedMovieId","_id","Math","trunc","MoviesCardList","movies","countCards","savedMovies","slice","map","key","len","chrs","str","i","pos","floor","random","length","substring","randomString","url","Preloader","ButtonAdd","onButtonAdd","Movies","loading","errorServer","SavedMovies","CurrentUserContext","React","createContext","Validation","initialValues","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","event","validationMessage","closest","checkValidity","Profile","onUpdateUser","onLogout","currentUser","useContext","email","pattern","disabled","ButtonRegister","buttonText","text","link","buttonLink","Login","onLogin","evt","password","Register","onRegister","PageNotFound","routeVisible","Footer","PopupNav","isOpen","onClose","moviesApi","address","this","_address","fetch","headers","then","_checkResponse","res","ok","json","Promise","reject","status","mainApi","token","format","_token","_format","localStorage","getItem","Authorization","Accept","method","body","JSON","stringify","country","director","year","description","nameEN","thumbnail","movieId","BASE_URL","checkResponse","ProtectedRoute","Component","component","InfoTooltip","isSuccess","App","history","useHistory","setChecked","isNavPopup","setisNavPopup","setMovies","setLoading","setErrorServer","setCountCards","addCards","setaddCards","moreCards","setMoreCards","isAuthSuccess","setIsAuthSuccess","userEmail","setUserEmail","setloggedIn","setCurrentUser","isInfoTooltipOpen","setisInfoTooltipOpen","setSavedMovies","moviesForBackend","shorts","moviesList","savedMovieIndex","findIndex","el","trailerLink","formats","filter","handleAuthSuccess","item","handleLogin","auth","result","setItem","push","catch","err","console","log","handleInfoTooltip","getUser","finally","showAllCards","results","data","countCard","innerWidth","timeoutResize","setTimeout","closePopup","useEffect","jwt","handleGetSavedMovies","addEventListener","removeEventListener","moviesFind","request","toLowerCase","includes","handleFilterCheckbox","getInitialMovies","parse","getInitialCards","moviesConvert","moviesForSaved","handleDeleteMovies","deleteCard","newCards","Provider","addSaveMovies","editUser","clear","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bb002d1c.chunk.js","sourcesContent":["import \"./Logo.css\";\r\nimport logo from \"../../images/logo.png\";\r\n\r\nfunction Logo() {\r\n  return (\r\n    <img className=\"logo\" src={logo} alt=\"Логотип\"/>\r\n  )\r\n}\r\nexport default Logo","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAMAAACf4xmcAAAAZlBMVEUAAAA93YQ93YU83IQ93IM814A93IQ83IU73IQ824M62oVA04A92YM93IM93IT////n+/BJ3ovz/fhV4ZO28tGS7LpV4JOG6bJh45vP9uCq8Mme7sLb+OjD9dlu5aPO9uCq8Mp556s4EaHoAAAADnRSTlMA79+AYCDPr3BAMBBQUFW3qR8AAAFESURBVDjLjZTZsoMgDEBZFFx6g+t1a237/z/ZEY2Amk7PE0POsCQEFpAmWnAArnSSMYJcCvAQUXxlSQ4HhDxJsYILxGHBiMMl/BZYQBI560YooRfzbxrH83l5KN9NYUw1tLWbU1sm3ExbGaRxorRbin2pxngUu8fz4JZ3E1D1/nL7YqM5UJSYZcYytPo1Nswl9K/CjkeMpSzB4WAjHVj+Vw+XS5iGLWDnWztGr8JbaIYl7+xp4BrBuH+BiaoEw9Fj0d5AEGodqeGmzfdNBZZz0Z6EpuiE+OXSLr1P9Lz01nt6U9Tm7QHNJdRTtY4xlnmlf51KX7vSM0k+pNpvh5wTz7J33Xp45F2xW2PpPXKLAk983JeWmZwE4vcGxKanuf3+OSB/1FfjWditZ9T5J5QnkUt2QRwFopA5I8gSrZYvWugkDQIfln1AIyTig5IAAAAASUVORK5CYII=\"","import React from 'react';\r\nimport './Navigation.css';\r\nimport { Link } from \"react-router-dom\";\r\nimport Logo from \"../Logo/Logo\";\r\n\r\nfunction Navigation(props) {\r\n  return (\r\n    <div className=\"header__contaner navigation\">\r\n        <div className=\"navigation__contaner\">\r\n            <Link to=\"/\"><Logo /></Link>\r\n                <nav className=\"navigation__links\"> \r\n                    <Link to=\"/movies\" className=\"header__sign-up navigation__movies\" >\r\n                        Фильмы\r\n                    </Link>\r\n                    <Link to=\"/saved-movies\" className=\"header__sign-up navigation__saved-movies\" >\r\n                        Сохранённые фильмы\r\n                    </Link>\r\n                </nav>\r\n        </div>\r\n        <Link to=\"/profile\" className=\"navigation__button\">Аккаунт</Link>\r\n        <div className=\"navigation__menu\" onClick={props.handleClick}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Navigation;","import React from 'react';\r\nimport './Header.css';\r\nimport { Route, Link, Switch, useLocation } from \"react-router-dom\";\r\nimport Navigation from \"../Navigation/Navigation\";\r\nimport Logo from \"../Logo/Logo\";\r\n\r\nfunction Header({loggedIn, handleClick}) {\r\n    const location = useLocation();\r\n  return (\r\n        <header className={`header ${(location.pathname === \"/sign-up\" \r\n        || location.pathname === \"/sign-in\")  && \"header_none\"}\r\n        ${location.pathname=== \"/\" && \"header\"}`}>\r\n            <Switch>\r\n                <Route exact path=\"/\"> \r\n                {!loggedIn && (\r\n                    <div className=\"header__contaner\">     \r\n                        <Link to=\"/\"><Logo /></Link>\r\n                            <div className=\"header__block\">\r\n                                <Link to=\"/sign-up\" className=\"header__sign-up\" >\r\n                                    Регистрация\r\n                                </Link>\r\n                                <Link to=\"/sign-in\" className=\"header__sign-in\" >\r\n                                    Войти\r\n                                </Link>\r\n                        </div>\r\n                    </div>\r\n                    )}\r\n                    {loggedIn && (\r\n                      <Navigation />\r\n                    )}\r\n                </Route>\r\n                <Route path=\"/movies\">\r\n                    <Navigation\r\n                    handleClick={handleClick}\r\n                    \r\n                    />\r\n                </Route>\r\n                <Route path=\"/saved-movies\">\r\n                    <Navigation/>\r\n                </Route>\r\n                <Route path=\"/profile\">\r\n                    <Navigation/>\r\n                </Route>\r\n            </Switch>\r\n        </header>\r\n  );\r\n}\r\n\r\nexport default Header;","export default __webpack_public_path__ + \"static/media/world.689dfeae.png\";","import './Promo.css';\r\nimport image from '../../../images/world.png';\r\n\r\nfunction handleScroll(){\r\n  document.querySelector(\".project\").scrollIntoView();\r\n}\r\n\r\nfunction Promo() {\r\n    return (\r\n      <section className=\"promo\">\r\n          <div className=\"promo__contaner\">\r\n            <div className=\"promo__description\">\r\n                <h1 className=\"promo__title\">Учебный проект студента факультета Веб-разработки.</h1>\r\n                    <p className=\"promo__subtitle\">Листайте ниже, чтобы узнать больше про этот проект и его создателя.</p>\r\n            </div>\r\n            <img className=\"promo__image\" src={image}  alt=\"Земной шар\"/>\r\n          </div>\r\n          <button onClick={handleScroll} className=\"promo__button\" aria-label=\"Кнопка узнать больше\">Узнать больше</button>\r\n      </section>\r\n    )\r\n  }\r\n  export default Promo;","import './AboutProject.css';\r\n\r\nfunction AboutProject() {\r\n    return (\r\n      <section className=\"project\">\r\n          <h2 className=\"project__header\">О проекте</h2>\r\n          <div className=\"project__description\">\r\n              <div className=\"project__stages\">\r\n                <h3 className=\"project__stages-title\">Дипломный проект включал 5 этапов</h3>\r\n                <p className=\"project__stages-subtitle\">Составление плана, работу над бэкендом, вёрстку, добавление функциональности и финальные доработки.</p>\r\n              </div>\r\n              <div className=\"project__stages\">\r\n                <h3 className=\"project__stages-title\">На выполнение диплома ушло 5 недель</h3>\r\n                <p className=\"project__stages-subtitle\">У каждого этапа был мягкий и жёсткий дедлайн, которые нужно было соблюдать, чтобы успешно защититься.</p>\r\n              </div>\r\n          </div>\r\n          <div className=\"project__time\">\r\n              <div className=\"project__time-front\">\r\n                  <p className=\"project__time-first\">1 неделя</p>\r\n                  <a href=\"https://github.com/ulist2020/movies-explorer-api\" className=\"project__time-about\">Back-end</a>\r\n              </div>\r\n              <div className=\"project__time-back\">\r\n                  <p className=\"project__time-second\">4 недели</p>\r\n                  <a href=\"https://github.com/ulist2020/movies-explorer-frontend\" className=\"project__time-about\">Front-end</a>\r\n              </div>\r\n          </div>\r\n      </section>\r\n    )\r\n  }\r\n  export default AboutProject;","import './Techs.css';\r\n\r\nfunction Techs() {\r\n    return (\r\n      <section className=\"techs\">\r\n          <h2 className=\"project__header techs__header\">Технологии</h2>\r\n            <div className=\"techs__description\">\r\n                <h1 className=\"promo__title techs__title\">7 технологий</h1>\r\n                    <p className=\"promo__subtitle techs__subtitle\">На курсе веб-разработки мы освоили технологии, которые применили в дипломном проекте.</p>\r\n                    <ul className=\"techs__list\">\r\n                        <li className=\"techs__technology\">HTML</li>\r\n                        <li className=\"techs__technology\">CSS</li>\r\n                        <li className=\"techs__technology\">JS</li>\r\n                        <li className=\"techs__technology\">React</li>\r\n                        <li className=\"techs__technology\">Git</li>\r\n                        <li className=\"techs__technology\">Express.js</li>\r\n                        <li className=\"techs__technology\">mongoDB</li>\r\n                    </ul>\r\n            </div>\r\n      </section>\r\n    )\r\n  }\r\n  export default Techs;","export default __webpack_public_path__ + \"static/media/photo.66f18048.jpg\";","import './AboutMe.css';\r\nimport image from '../../../images/photo.jpg'\r\n\r\nfunction AboutMe() {\r\n    return (\r\n      <section className=\"about\">\r\n          <h2 className=\"project__header\">Студент</h2>\r\n          <div className=\"promo__contaner about__contaner\">\r\n            <div className=\"about__description\">\r\n                <h1 className=\"promo__title about__title\">Юлия</h1>\r\n                    <p className=\"about__profession\">Фронтенд-разработчик, 36 лет</p>\r\n                    <p className=\"about__subtitle\">Я живу в Екатеринбурге, закончила гуманитарный факультет УГТУ-УПИ. У меня есть муж \r\n                                                    и две дочери. Я люблю заниматься садом, а ещё увлекаюсь йогой. Недавно начала кодить. \r\n                                                    С 2007 года работала в сфере торговли.\r\n                                                    Когда начала учится на курсах по веб-разработке ушла с постоянной работы. \r\n                                                    Сейчас занимаюсь поиском работы.\r\n                                                    </p>\r\n                        <a href=\"https://github.com/ulist2020\" className=\"about-link\">Github</a>\r\n                        <a href=\"https://www.instagram.com/juliy_smirnovaa/\" className=\"about-link\">Instagram</a>\r\n            </div>\r\n            <img className=\"about__image\" src={image}  alt=\"Фотография студента\"/>\r\n          </div>\r\n      </section>\r\n    )\r\n  }\r\n  export default AboutMe;","import './Portfolio.css';\r\n\r\nfunction Portfolio() {\r\n    return (\r\n      <section className=\"portfolio\">\r\n          <h2 className=\"portfolio__header\">Портфолио</h2>\r\n          <ul className=\"portfolio__list\">\r\n              <li className=\"portfolio__block\">\r\n                  <p className=\"portfolio__name\">Статичный сайт</p>\r\n                  <a href=\"https://github.com/ulist2020\" className=\"portfolio__link\">↗</a>\r\n              </li>\r\n              <li className=\"portfolio__block\">\r\n                  <p className=\"portfolio__name\">Адаптивный сайт</p>\r\n                  <a href=\"https://github.com/ulist2020\" className=\"portfolio__link\">↗</a>\r\n              </li>\r\n              <li className=\"portfolio__block portfolio__block-line\">\r\n                  <p className=\"portfolio__name\">Одностраничное приложение</p>\r\n                  <a href=\"https://github.com/ulist2020\" className=\"portfolio__link\">↗</a>\r\n              </li>\r\n          </ul>\r\n      </section>\r\n    )\r\n  }\r\n  export default Portfolio;","import './Main.css';\r\nimport Promo from \"./Promo/Promo\";\r\nimport AboutProject from \"./AboutProject/AboutProject\";\r\nimport Techs from \"./Techs/Techs\";\r\nimport AboutMe from \"./AboutMe/AboutMe\";\r\nimport Portfolio from \"./Portfolio/Portfolio\";\r\n\r\nfunction Main() {\r\n  return (\r\n    <main className=\"main\">\r\n      <Promo />\r\n      <AboutProject />\r\n      <Techs />\r\n      <AboutMe />\r\n      <Portfolio />\r\n    </main>\r\n  )\r\n}\r\nexport default Main;","import './FilterCheckbox.css';\r\n\r\nfunction FilterCheckbox({ onClickCheckbox, checkedShorts }) {\r\n  return (\r\n    <div className=\"filter\">\r\n            <input id=\"filter\" className=\"filter-input\" checked={checkedShorts} onChange={onClickCheckbox} name=\"filter\" type=\"checkbox\"/>\r\n            <label htmlFor=\"filter\">Короткометражки</label>\r\n    </div>\r\n  )\r\n}\r\nexport default FilterCheckbox;","import React, { useState } from 'react';\r\nimport './SearchForm.css';\r\nimport FilterCheckbox from \"../FilterCheckbox/FilterCheckbox\";\r\n\r\nfunction SearchForm({onUpdateForm, onClickCheckbox, checkedShorts}) {\r\n  const [movie, setMovie] = useState('');\r\n\r\n  function handleChangeMovie(e) {\r\n    setMovie(e.target.value);\r\n  }\r\n\r\n    function handleSubmit(e) {\r\n      e.preventDefault();\r\n      onUpdateForm(movie)\r\n}\r\n  return (\r\n    <div className=\"form\">\r\n        <form className=\"form__contaner\" onSubmit={handleSubmit}>\r\n            <input \r\n            value={movie}\r\n            onChange={handleChangeMovie}\r\n            id=\"form-name\" \r\n            className=\"form__input\" \r\n            placeholder=\"Фильм\" \r\n            name=\"name\" \r\n            tape=\"text\" \r\n            minLength=\"2\" \r\n            maxLength=\"50\" required/>\r\n            <button className=\"form__button\" tape=\"submit\" aria-label=\"Найти\">Найти</button>\r\n        </form>\r\n        <FilterCheckbox \r\n        onClickCheckbox={onClickCheckbox}\r\n        checkedShorts = {checkedShorts} />\r\n    </div>\r\n  )\r\n}\r\nexport default SearchForm;","import React from 'react';\r\nimport './MoviesCard.css';\r\n\r\nfunction MoviesCard({ card, nameRU, image, duration, owner, isSavedMoviesPage, onSavedMovies, onDeleteMovies, isSaved}) {\r\n\r\nfunction Time(min) {\r\n  const hours = Math.trunc(min / 60);\r\n  const minutes = min % 60;\r\n  return hours + \"ч \" + minutes + \"м\";\r\n};\r\n\r\nconst cardLikeButtonClassName = (\r\n  `card__like ${isSaved ? 'card__like_activ' : ''}`\r\n); \r\n\r\n  const handleLikeClick = () => {\r\n      if (isSaved) {\r\n        onDeleteMovies(card.savedMovieId);\r\n    } else {\r\n        onSavedMovies(card);\r\n    }\r\n  }\r\n  const handleDeleteClick = () => {\r\n      onDeleteMovies(card._id);\r\n  }\r\n\r\n  function openTrailer(){\r\n      window.open(card.trailer)\r\n  }\r\n\r\n  return (\r\n    <li className=\"card\">\r\n        <div className=\"card__video\" onClick={openTrailer} style={{ backgroundImage: `url(${image})` }} />\r\n            <div className=\"card__contaner\">\r\n                <p className=\"card__name\" >{nameRU}</p>\r\n                {\r\n                isSavedMoviesPage ?\r\n                <button className={cardLikeButtonClassName} onClick={handleLikeClick}  type=\"button\" aria-label=\"Поставить лайк\" />\r\n                : <button className=\"card__like card__like-saved\" onClick={handleDeleteClick} type=\"reset\" aria-label=\"Удалить фильм из сохраненных\" />\r\n                }\r\n            </div>\r\n            <p className=\"card__time\">{Time(duration)}</p>\r\n    </li>\r\n  )\r\n}\r\nexport default MoviesCard;","import React from 'react';\r\nimport './MoviesCardList.css';\r\nimport MoviesCard from \"../MoviesCard/MoviesCard\";\r\n\r\nfunction randomString(len) {\r\n  const chrs = 'abdehkmnpswxzABDEFGHKMNPQRSTWXZ123456789';\r\n  let str = '';\r\n  for (let i = 0; i < len; i++) {\r\n      let pos = Math.floor(Math.random() * chrs.length);\r\n      str += chrs.substring(pos,pos+1);\r\n  }\r\n  return str;\r\n};\r\n\r\nfunction MoviesCardList({movies, countCards, onSavedMovies, isSavedMoviesPage, onDeleteMovies, savedMovies}) {\r\n\r\n  return (\r\n      <div className=\"list\">\r\n        <ul className=\"list__contaner\">\r\n        {movies.slice(0, countCards).map((card)=> {\r\n          const key = randomString(20);\r\n          return (<MoviesCard\r\n              key={key}\r\n              image={card.image.url ? `https://api.nomoreparties.co`+card.image.url : card.image} \r\n              nameRU={card.nameRU}\r\n              duration={card.duration}\r\n              owner={card.owner}\r\n              card={card}\r\n              onSavedMovies={onSavedMovies}\r\n              onDeleteMovies={onDeleteMovies}\r\n              isSavedMoviesPage={isSavedMoviesPage}\r\n              savedMovies={savedMovies}\r\n              isSaved = {card.isSaved}\r\n          />)\r\n        }\r\n            \r\n        )}\r\n        </ul>\r\n    </div>\r\n  )\r\n}\r\nexport default MoviesCardList;","import React from 'react'\r\nimport './Preloader.css'\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <div className=\"preloader\">\r\n            <div className=\"preloader__container\">\r\n                <span className=\"preloader__round\"></span>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Preloader\r\n","import './ButtonAdd.css';\r\n\r\nfunction ButtonAdd({onButtonAdd}) {\r\n  return (\r\n      <div className=\"button\">\r\n        <button  className=\"button__add\" onClick={onButtonAdd}>Ещё</button>\r\n    </div>\r\n  )\r\n}\r\nexport default ButtonAdd;","import './Movies.css';\r\nimport SearchForm from \"./SearchForm/SearchForm\";\r\nimport MoviesCardList from \"./MoviesCardList/MoviesCardList\";\r\nimport Preloader from './Preloader/Preloader';\r\nimport ButtonAdd from \"../Movies/ButtonAdd/ButtonAdd\";\r\n\r\nfunction Movies({movies, onUpdateForm, loading, errorServer, onClickCheckbox, countCards, onButtonAdd, onSavedMovies, savedMovies, onDeleteMovies,checkedShorts}) {\r\n\r\n  return (\r\n    <div className=\"movies\">\r\n        <SearchForm \r\n        onUpdateForm={onUpdateForm}\r\n        onClickCheckbox={onClickCheckbox}\r\n        checkedShorts = {checkedShorts}\r\n          />\r\n        {loading && (<Preloader />)}\r\n        {!movies.length && !errorServer && (\r\n        <p className=\"movies__not-found\">Ничего не найдено</p>\r\n        )}\r\n        {errorServer && (<p className=\"movies__not-found\">Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз</p>)}\r\n        <MoviesCardList \r\n        movies={movies}\r\n        countCards={countCards}\r\n        onSavedMovies={onSavedMovies} \r\n        isSavedMoviesPage ={true}\r\n        savedMovies={savedMovies}\r\n        onDeleteMovies={onDeleteMovies}  \r\n        />\r\n        {countCards < movies.length && (\r\n        <ButtonAdd \r\n        onButtonAdd={onButtonAdd}\r\n        />\r\n        )}\r\n    </div>\r\n  )\r\n}\r\nexport default Movies;","import './SavedMovies.css';\r\nimport SearchForm from \"../Movies/SearchForm/SearchForm\";\r\nimport MoviesCardList from \"../Movies/MoviesCardList/MoviesCardList\";\r\nimport Preloader from '../Movies/Preloader/Preloader';\r\n\r\nfunction SavedMovies({ onUpdateForm, loading, errorServer, onClickCheckbox, countCards, onButtonAdd, savedMovies, onDeleteMovies,checkedShorts}) {\r\n  return (\r\n    <div className=\"movies\">\r\n        <SearchForm \r\n        onUpdateForm={onUpdateForm}\r\n        onClickCheckbox={onClickCheckbox}\r\n        checkedShorts = {checkedShorts}\r\n          />\r\n        {loading && (<Preloader />)}\r\n        {!savedMovies.length && !errorServer && (\r\n        <p className=\"movies__not-found\">Ничего не найдено</p>\r\n        )}\r\n        {errorServer && (<p className=\"movies__not-found\">Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз</p>)}\r\n        <MoviesCardList \r\n        savedMovies={savedMovies}\r\n        movies={savedMovies}\r\n        countCards={countCards}\r\n        isSavedMoviesPage={false}\r\n        onDeleteMovies={onDeleteMovies}   \r\n        />\r\n    </div>\r\n  )\r\n}\r\nexport default SavedMovies;","import React from 'react';\r\nexport const CurrentUserContext = React.createContext();","import React, { useCallback } from \"react\";\r\n\r\nfunction Validation(initialValues) {\r\n  const [values, setValues] = React.useState(initialValues);\r\n  const [errors, setErrors] = React.useState({});\r\n  const [isValid, setIsValid] = React.useState(false);\r\n\r\n  const handleChange = (event) => {\r\n    const target = event.target;\r\n    const name = target.name;\r\n    const value = target.value;\r\n    setValues({...values, [name]: value});\r\n    setErrors({...errors, [name]: target.validationMessage });\r\n    setIsValid(target.closest(\"form\").checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n      (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n        setValues(newValues);\r\n        setErrors(newErrors);\r\n        setIsValid(newIsValid);\r\n      },\r\n      [setValues, setErrors, setIsValid]\r\n  );\r\n\r\n  return { values, handleChange, errors, isValid, resetForm };\r\n}\r\n\r\nexport default Validation;","import React from 'react';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport './Profile.css';\r\nimport  Validation  from '../../utils/Validation';\r\n\r\n\r\nfunction Profile({onUpdateUser, onLogout}) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    const {values, handleChange, errors, isValid} = Validation({\r\n      name: currentUser.name,\r\n      email: currentUser.email\r\n    });\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        if (isValid) {\r\n        onUpdateUser(values);\r\n      }\r\n    }\r\n  return (\r\n    <form className=\"profile\"  onSubmit={handleSubmit}>\r\n        <h3 className=\"profile__header\">Привет, {currentUser.name}!</h3>\r\n          <div className=\"profile__contaner\">\r\n            <div className=\"profile____block profile____block-line\">\r\n                <p className=\"profile__description\">Имя</p>\r\n                  <input \r\n                  value={values.name}\r\n                  onChange={handleChange} \r\n                  id=\"profile-name\" \r\n                  className={`profile__input ${errors && errors[\"name\"] && 'register__input_error'}`}\r\n                  name=\"name\" \r\n                  tape=\"text\" \r\n                  minLength=\"2\" \r\n                  maxLength=\"20\"\r\n                  required \r\n                  />\r\n            </div>\r\n                <span className=\"register__error\">{errors && errors[\"name\"] && errors[\"name\"]}</span>\r\n            <div className=\"profile____block\">\r\n              <p className=\"profile__description\">E-mail</p>\r\n                <input\r\n                value={values.email}\r\n                onChange={handleChange} \r\n                id=\"profile-password\" \r\n                className={`profile__input ${errors && errors[\"name\"] && 'register__input_error'}`} \r\n                name=\"email\" \r\n                tape=\"email\" \r\n                minLength=\"2\" \r\n                maxLength=\"20\"\r\n                pattern=\"^((([0-9A-Za-z]{1}[-0-9A-z\\.]{0,30}[0-9A-Za-z]?)|([0-9А-Яа-я]{1}[-0-9А-я\\.]{0,30}[0-9А-Яа-я]?))@([-A-Za-z]{1,}\\.){1,}[-A-Za-z]{2,})$\" \r\n                required/>\r\n            </div>\r\n                <span className=\"register__error\">{errors && errors[\"email\"] && errors[\"email\"]}</span>\r\n          </div>\r\n          <button className=\"profile__redaction\" tape=\"submit\" aria-label=\"Редактировать\" disabled={!isValid}>Редактировать</button>\r\n          <button className=\"profile__out\" onClick={onLogout} aria-label=\"Выйти из аккаунта\">Выйти из аккаунта</button>\r\n    </form>\r\n  )\r\n}\r\nexport default Profile;","import './ButtonRegister.css';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction ButtonRegister({className, disabled, buttonText, text, link, buttonLink}) {\r\n  return (\r\n    <div className={className}>\r\n        <button className=\"but__profile\" disabled={disabled} tape=\"submit\" aria-label={buttonText}>{buttonText}</button>\r\n          <p className=\"but__register\">{text}\r\n              <Link to={link} className=\"but__register-auth\">{buttonLink} </Link>\r\n          </p>\r\n    </div>\r\n  )\r\n}\r\nexport default ButtonRegister;","import React from 'react';\r\nimport './Login.css';\r\nimport { Link } from \"react-router-dom\";\r\nimport ButtonRegister from \"../Register/ButtonRegister/ButtonRegister\";\r\nimport Logo from \"../Logo/Logo\";\r\nimport  Validation  from '../../utils/Validation';\r\n\r\n\r\nfunction Login({onLogin}) {\r\n\r\n  const {values, handleChange, errors, isValid} = Validation({});\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    if (isValid) {\r\n    onLogin(values.email, values.password);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"register\" onSubmit={handleSubmit}>\r\n        <div className=\"register__contaner\">\r\n          <Link to=\"/\"><Logo /></Link>\r\n          <h3 className=\"register__header\">Рады видеть!</h3>\r\n        </div>\r\n            <p className=\"register__description\">E-mail</p>\r\n              <input \r\n              onChange={handleChange} \r\n              className={`register__input ${errors && errors[\"name\"] && 'register__input_error'}`}\r\n              name=\"email\" \r\n              tape=\"email\"\r\n              pattern=\"^((([0-9A-Za-z]{1}[-0-9A-z\\.]{0,30}[0-9A-Za-z]?)|([0-9А-Яа-я]{1}[-0-9А-я\\.]{0,30}[0-9А-Яа-я]?))@([-A-Za-z]{1,}\\.){1,}[-A-Za-z]{2,})$\" \r\n              required/>\r\n               <span className=\"register__error\">{errors && errors[\"email\"] && errors[\"email\"]}</span>\r\n            <p className=\"register__description\">Пароль</p>\r\n              <input \r\n              onChange={handleChange} \r\n              className={`register__input ${errors && errors[\"name\"] && 'register__input_error'}`}  \r\n              name=\"password\" \r\n              type=\"password\" \r\n              minLength=\"8\" \r\n              maxLength=\"20\" \r\n              required/>\r\n              <span className=\"register__error\">{errors && errors[\"password\"] && errors[\"password\"]}</span>\r\n                <ButtonRegister\r\n                  disabled={!isValid}\r\n                  className=\"but__login\"\r\n                  buttonText=\"Войти\"\r\n                  text=\"Ещё не зарегистрированы?\"\r\n                  link=\"/sign-up\"\r\n                  buttonLink=\"Регистрация\"\r\n                />\r\n    </form>\r\n  )\r\n}\r\nexport default Login;","import { Link } from \"react-router-dom\";\r\nimport React from 'react';\r\nimport './Register.css';\r\nimport ButtonRegister from \"./ButtonRegister/ButtonRegister\";\r\nimport Logo from \"../Logo/Logo\";\r\nimport  Validation  from '../../utils/Validation';\r\n\r\nfunction Register({onRegister}) {\r\n    const {values, handleChange, errors, isValid} = Validation({});\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n            if (isValid) {\r\n                onRegister(values.name, values.email, values.password);\r\n            }\r\n    }\r\n\r\n  return (\r\n    <form className=\"register\" onSubmit={handleSubmit}>\r\n        <div className=\"register__contaner\">\r\n            <Link to=\"/\"><Logo /></Link>\r\n            <h3 className=\"register__header\">Добро пожаловать!</h3>\r\n        </div>\r\n            <p className=\"register__description\">Имя</p>\r\n                <input \r\n                onChange={handleChange}\r\n                className={`register__input ${errors && errors[\"name\"] && 'register__input_error'}`} \r\n                name=\"name\" \r\n                tape=\"text\" \r\n                minLength=\"2\" \r\n                maxLength=\"20\" \r\n                required/>\r\n                <span className=\"register__error\">{errors && errors[\"name\"] && errors[\"name\"]}</span>\r\n            <p className=\"register__description\">E-mail</p>\r\n                <input\r\n                onChange={handleChange}\r\n                className={`register__input ${errors && errors[\"name\"] && 'register__input_error'}`} \r\n                name=\"email\" \r\n                tape=\"email\"\r\n                pattern=\"^((([0-9A-Za-z]{1}[-0-9A-z\\.]{0,30}[0-9A-Za-z]?)|([0-9А-Яа-я]{1}[-0-9А-я\\.]{0,30}[0-9А-Яа-я]?))@([-A-Za-z]{1,}\\.){1,}[-A-Za-z]{2,})$\" \r\n                required/>\r\n                <span className=\"register__error\">{errors && errors[\"email\"] && errors[\"email\"]}</span>\r\n            <p className=\"register__description\">Пароль</p>\r\n                <input\r\n                onChange={handleChange} \r\n                className={`register__input ${errors && errors[\"name\"] && 'register__input_error'}`} \r\n                name=\"password\" \r\n                type=\"password\" \r\n                minLength=\"8\" \r\n                maxLength=\"20\" \r\n                required/>\r\n                <span className=\"register__error\">{errors && errors[\"password\"] && errors[\"password\"]}</span> \r\n                <ButtonRegister\r\n                    disabled={!isValid}\r\n                    className=\"but\"\r\n                    buttonText=\"Зарегистрироваться\"\r\n                    text=\"Уже зарегистрированы?\"\r\n                    link=\"/sign-in\"\r\n                    buttonLink=\"Войти\"\r\n                 />\r\n    </form>\r\n  )\r\n}\r\nexport default Register;","import './PageNotFound.css';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nfunction PageNotFound() {\r\n    return (\r\n        <div className=\"page\">\r\n            <h2 className=\"page__title\">404</h2>\r\n            <p className=\"page__subtitle\">Страница не найдена</p>\r\n            <Link className=\"page__link\" to=\"/\">Назад</Link>\r\n        </div>\r\n    )\r\n  }\r\n  export default PageNotFound;","import React from 'react';\r\nimport { Route, Switch, useLocation } from \"react-router-dom\";\r\nimport './Footer.css';\r\n\r\nconst routeVisible = ['/', '/movies', '/saved-movies']\r\n\r\nfunction Footer() {\r\n  const location = useLocation();\r\n    return (\r\n      <footer className={`footer ${(location.pathname === \"/sign-up\" \r\n        || location.pathname === \"/sign-in\"\r\n        || location.pathname === \"/profile\")  && \"footer_none\"}\r\n        ${(location.pathname === {routeVisible}) && \"footer\"}`}>\r\n          <Switch>\r\n            <Route exact path = {routeVisible}> \r\n              <p className=\"project__header footer__header\">Учебный проект Яндекс.Практикум х BeatFilm.</p>\r\n              <div className=\"footer__block\">\r\n                  <p className=\"footer__year\">© 2021</p>\r\n                  <div className=\"footer__links\">\r\n                    <a href=\"https://praktikum.yandex.ru\" className=\"about-link footer__link\">Яндекс.Практикум</a>\r\n                    <a href=\"https://github.com/ulist2020\" className=\"about-link footer__link\">Github</a>\r\n                    <a href=\"https://www.instagram.com/juliy_smirnovaa/\" className=\"about-link footer__link\">Instagram</a>\r\n                  </div>\r\n              </div>\r\n            </Route>\r\n          </Switch>\r\n      </footer>\r\n    )\r\n  }\r\n  export default Footer;","import './PopupNav.css';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction PopupNav(props) {\r\n    return (\r\n        <div className={props.isOpen ? 'popup popup_opened' : 'popup'}>\r\n            <div className=\"popup__container\">\r\n                <button onClick={props.onClose} className=\"popup__close-button\" type=\"reset\" aria-label=\"Закрыть окно редактирования\" />\r\n                    <div className=\"popup__block\">\r\n                        <Link onClick={props.onClose} className=\"popup__menu\" to=\"/\">Главная</Link>\r\n                        <Link onClick={props.onClose} className=\"popup__menu\" to=\"/movies\">Фильмы</Link>\r\n                        <Link onClick={props.onClose} className=\"popup__menu\" to=\"/saved-movies\">Сохранённые фильмы</Link>\r\n                        <Link onClick={props.onClose} className=\"navigation__button  popup__button\" to=\"/profile\">Аккаунт</Link>\r\n                    </div>\r\n            </div>\r\n        </div>\r\n    )\r\n  }\r\n  export default PopupNav;","class Api {\r\n    constructor({address}) {\r\n        this._address = address;\r\n    }\r\n\r\n    getInitialMovies() {\r\n        return fetch(this._address, {\r\n            headers: {\r\n                'Content-Type': \"application/json\"\r\n            }\r\n        })\r\n        .then(this._checkResponse);\r\n    }\r\n    _checkResponse(res) {\r\n        if (res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка ${res.status}`);\r\n    }\r\n}\r\n\r\nconst moviesApi = new Api({\r\n    address: 'https://api.nomoreparties.co/beatfilm-movies',\r\n  }); \r\n\r\n  export default moviesApi;","class Api {\r\n    constructor({address, token, format}) {\r\n        this._address = address;\r\n        this._token = token;\r\n        this._format = format;\r\n    }\r\n\r\n    //Загрузка информации о пользователе с сервера\r\n    getUser(){\r\n        this._token = `Bearer ${localStorage.getItem('jwt')}`;\r\n  \r\n        return fetch(`${this._address}/users/me`, {\r\n            headers: {\r\n                Authorization: this._token,\r\n                Accept: \"application/json\",\r\n                'Content-Type': this._format\r\n            }\r\n        })\r\n        .then(this._checkResponse)\r\n    }    \r\n    \r\n    //Редактирование профиля\r\n    editUser({ name, email }){\r\n        return fetch(`${this._address}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                Authorization: this._token,\r\n                Accept: \"application/json\",\r\n                'Content-Type': this._format\r\n            },\r\n            body: JSON.stringify({\r\n                name,\r\n                email\r\n            })\r\n    })\r\n    .then(this._checkResponse)\r\n\r\n    }\r\n\r\n    //Загрузка карточек с сервера\r\n    getInitialCards() {\r\n        //console.log(localStorage.getItem('jwt'))\r\n        return fetch(`${this._address}/movies`, {\r\n            headers: {\r\n                Authorization: this._token,\r\n                Accept: \"application/json\",\r\n                'Content-Type': this._format\r\n            }\r\n        })\r\n        .then(this._checkResponse)\r\n    }\r\n\r\n    //Добавление сохраненного фильма\r\n    addSaveMovies({ country,\r\n        director,\r\n        duration,\r\n        year,\r\n        description,\r\n        image,\r\n        trailer,\r\n        nameRU,\r\n        nameEN,\r\n        thumbnail,\r\n        movieId,\r\n     }){\r\n        return fetch(`${this._address}/movies`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': this._token,\r\n                'Content-Type': this._format\r\n            },\r\n            body: JSON.stringify({\r\n                country: country,\r\n                director: director,\r\n                duration: duration,\r\n                year: year,\r\n                description: description,\r\n                image: 'https://api.nomoreparties.co'+image.url,\r\n                trailer: trailer,\r\n                nameRU: nameRU,\r\n                nameEN: nameEN,\r\n                thumbnail: thumbnail,\r\n                movieId: movieId,\r\n            })\r\n    })\r\n    .then(this._checkResponse)\r\n}\r\n\r\n    //Удаление карточки\r\n    deleteCard(id){\r\n        return fetch(`${this._address}/movies/${id}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Authorization': this._token,\r\n                    'Content-Type': this._format\r\n                },\r\n        })\r\n        .then(this._checkResponse)\r\n        \r\n    }\r\n\r\n    _checkResponse(res) {\r\n        if (res.ok) {\r\n            return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка ${res.status}`);\r\n    }\r\n}\r\n\r\nconst mainApi = new Api({\r\n    address: 'https://api.julia.smirnova.nomoredomains.club',\r\n    //address: 'http://localhost:3000',\r\n    token: `Bearer ${localStorage.getItem('jwt')}`,\r\n    format: 'application/json'\r\n  }); \r\n  \r\n  export default mainApi;","export const BASE_URL = 'https://api.julia.smirnova.nomoredomains.club';\r\n//export const BASE_URL = 'http://localhost:3000';\r\n\r\nconst checkResponse =(res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n    return Promise.reject(`Ошибка ${res.status}`);\r\n}\r\n\r\nexport const register = (name, email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      name,\r\n      email,\r\n      password\r\n    })\r\n  })\r\n  .then(checkResponse)\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      email,\r\n      password\r\n    })\r\n  })\r\n  .then(checkResponse)\r\n}; \r\n\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n    }\r\n  })\r\n  .then(checkResponse)\r\n};","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"/\" />\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;","import React from \"react\";\r\nimport './InfoTooltip.css';\r\n\r\nfunction InfoTooltip({isOpen, onClose, isSuccess }) {\r\n  return (\r\n    <section \r\n    className={isOpen ? 'popup popup_opened' : 'popup'} \r\n    id=\"InfoTooltip\">\r\n      <div className=\"popup__cont\">\r\n        <button\r\n          className=\"popup__close-but\"\r\n          type=\"button\"\r\n          onClick={onClose}\r\n        />\r\n        {isSuccess ? (\r\n          <>\r\n            <div className=\"popup__img\" />\r\n            <h2 className=\"popup__header\">Успешно!</h2>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <div className=\"popup__img popup__img_fail\" />\r\n            <h2 className=\"popup__header popup__header_info\">Что-то пошло не так. Попробуйте ещё раз!</h2>\r\n          </>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;","import React, { useEffect, useState } from 'react';\r\nimport { Route, Switch, useHistory } from \"react-router-dom\";\r\nimport '../../index.css';\r\nimport './App.css';\r\nimport Header from '../Header/Header';\r\nimport Main from '../Main/Main';\r\nimport Movies from '../Movies/Movies';\r\nimport SavedMovies from '../SavedMovies/SavedMovies';\r\nimport Profile from '../Profile/Profile';\r\nimport Login from '../Login/Login';\r\nimport Register from '../Register/Register';\r\nimport PageNotFound from '../PageNotFound/PageNotFound';\r\nimport Footer from '../Footer/Footer';\r\nimport PopupNav from '../PopupNav/PopupNav';\r\nimport moviesApi from '../../utils/MoviesApi';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport mainApi from '../../utils/MainApi';\r\nimport * as auth from \"../../utils/auth\";\r\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\r\nimport InfoTooltip from \"../InfoTooltip/InfoTooltip\";\r\n\r\nfunction App() {\r\n  const history = useHistory();\r\n  let [checkedShorts, setChecked] = useState(false);\r\n  const [isNavPopup, setisNavPopup] = useState(false);\r\n  const [movies, setMovies] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorServer, setErrorServer] = useState(false);\r\n  const [countCards, setCountCards] = useState(0);\r\n  const [addCards, setaddCards] = useState(0);\r\n  const [moreCards, setMoreCards] = useState(0);\r\n  const [isAuthSuccess, setIsAuthSuccess] = useState(false);\r\n  const [userEmail, setUserEmail] = useState('');\r\n  const [loggedIn, setloggedIn] = useState(false);\r\n  let  [currentUser, setCurrentUser] = useState({});\r\n  const [isInfoTooltipOpen, setisInfoTooltipOpen] = useState(false);\r\n  const [savedMovies, setSavedMovies] = useState([]);\r\n\r\n  const moviesForBackend = (movies, savedMovies, shorts = false) => {\r\n    let moviesList = movies.map((movie) => {\r\n      let savedMovieIndex = [];\r\n      let isSaved = false;\r\n      let savedMovieId = null;\r\n      if (savedMovies) {\r\n        savedMovieIndex = savedMovies.findIndex(el => el.movieId === movie.id && el.owner === currentUser._id);\r\n        if (savedMovieIndex > -1) {\r\n          isSaved = true;\r\n          savedMovieId = savedMovies[savedMovieIndex]._id;\r\n        }\r\n      }\r\n      return {\r\n        country: movie.country ? movie.country : \"No country\",\r\n        director: movie.director,\r\n        duration: movie.duration,\r\n        year: movie.year,\r\n        description: movie.description,\r\n        image:  movie.image,\r\n        trailer: movie.trailerLink,\r\n        thumbnail: movie.image ? `https://api.nomoreparties.co${movie.image.formats.thumbnail.url}` : '',\r\n        nameRU: movie.nameRU ?? \"\",\r\n        nameEN: movie.nameEN ?? \"\",\r\n        movieId: movie.id,\r\n        isSaved: isSaved,\r\n        savedMovieId: savedMovieId\r\n      }\r\n    });\r\n    if (shorts) {\r\n      moviesList = moviesList.filter(movie => movie.duration <= 40);\r\n    }\r\n    return moviesList;\r\n  }\r\n\r\n  function handleAuthSuccess(item) {\r\n    setIsAuthSuccess(item);\r\n  }\r\n\r\n  //Авторизация\r\n  function handleLogin(email, password) {\r\n      auth.authorize(email, password)\r\n      .then((result) => {\r\n        if (result.token) {\r\n          localStorage.setItem(\"jwt\", result.token);\r\n          setUserEmail({\r\n            email: email,\r\n          });\r\n          setloggedIn(true);\r\n          history.push(\"/movies\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n        setIsAuthSuccess(false);\r\n        handleInfoTooltip();\r\n      })\r\n      .then(() => {\r\n        getUser()\r\n\r\n      })\r\n      .finally(() => {\r\n        localStorage.setItem('lastFetchMovies','0');\r\n        showAllCards();\r\n      })\r\n  };\r\n\r\n  //Регистрация\r\n  function handleRegister(name, email, password) {\r\n    auth.register(name, email, password)\r\n      .then((result) => {\r\n        if (result) {\r\n          handleAuthSuccess(true);\r\n          handleInfoTooltip();\r\n          handleLogin(email, password)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n        handleAuthSuccess(false);\r\n        handleInfoTooltip();\r\n      });\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    if (jwt) {\r\n      auth.getContent(jwt)\r\n        .then((result) => {\r\n          setUserEmail({\r\n              email: result.data.email\r\n          })\r\n            setloggedIn(true);\r\n            history.push(\"/movies\");\r\n        })\r\n        .catch((err) => {\r\n          console.log(`Ошибка: ${err}`);\r\n        })\r\n        .finally(() => {\r\n          handleGetSavedMovies();\r\n        });\r\n    }\r\n  }, [history]);\r\n\r\n  //Вывод пользователя\r\n  function getUser (){\r\n    mainApi.getUser()\r\n    .then((results) => {\r\n      currentUser = {\r\n        _id: results.data._id,\r\n        name: results.data.name,\r\n        email: results.data.email,\r\n      }\r\n      setCurrentUser(currentUser);\r\n    })\r\n    .catch((err) => console.log(`Ошибка: ${err}`));\r\n  }\r\n\r\n  //Редактирование пользователя\r\n  function handleUpdateUser(currentUser) {\r\n    mainApi.editUser(currentUser)\r\n      .then((results) =>{\r\n        setCurrentUser(results);\r\n        handleAuthSuccess(true);\r\n        handleInfoTooltip();\r\n      })\r\n      .catch((err) => console.log(`Ошибка: ${err}`));\r\n        handleAuthSuccess(false);\r\n        handleInfoTooltip();\r\n  }\r\n\r\n  //Выход из аккаунта\r\n  function handleLogOut () {\r\n    localStorage.clear();\r\n    setCurrentUser({});\r\n    setSavedMovies([]);\r\n    setMovies([]);\r\n    setloggedIn(false);\r\n    history.push(\"/\");\r\n  };\r\n\r\n   //Кличество карточек в зависимости от разрешения экрана\r\n  function countCard() {\r\n    if (window.innerWidth >= 1024) {\r\n      setCountCards(12);\r\n      setaddCards(4);\r\n    }\r\n    if (window.innerWidth <= 1023 && window.innerWidth >= 768) {\r\n      setCountCards(8);\r\n      setaddCards(2);\r\n    }\r\n    if (window.innerWidth <= 480 && window.innerWidth >= 320) {\r\n      setCountCards(5);\r\n      setaddCards(2);\r\n    }\r\n  }\r\n\r\n  function timeoutResize() {\r\n    setTimeout(countCard, 300);\r\n  };\r\n\r\n   //Изменение ширины экрана\r\n  useEffect(() => {\r\n    window.addEventListener(\"resize\", timeoutResize);\r\n    return () => window.removeEventListener('resize', timeoutResize);\r\n  },);\r\n\r\n //Нажатие на кнопку \"ещё\"\r\n  const handleClickAddCards = () => {\r\n    setLoading(true);\r\n    setMoreCards(moreCards + addCards);\r\n    setLoading(false);\r\n  };\r\n\r\n  function handleNavPopupClick() {\r\n    setisNavPopup(true);\r\n  }\r\n\r\n  function handleInfoTooltip() {\r\n    setisInfoTooltipOpen(true);\r\n  }\r\n\r\n  function closePopup() {\r\n    setisNavPopup(false);\r\n    setisInfoTooltipOpen(false);\r\n  }\r\n\r\n  //Фильтр фильма по названию и короткого фильма\r\n  const moviesFind = (moviesList, request = null, shorts = false) => {\r\n    if (shorts) {\r\n      moviesList = moviesList.filter((movie) => {\r\n        return movie.duration <= 40;\r\n      })\r\n    }\r\n    if (request) {\r\n      moviesList = moviesList.filter((movie) => {\r\n        return movie.nameRU.toLowerCase().includes(request.toLowerCase());\r\n      })\r\n    }\r\n    return moviesList;\r\n  };\r\n\r\n  //Поиск короткого фильма\r\n  function handleFilterCheckbox(){\r\n    checkedShorts = !checkedShorts;\r\n    setChecked(checkedShorts);\r\n    setLoading(true);\r\n    showAllCards();\r\n    setLoading(false);\r\n  }\r\n\r\n //Вывод всех фильмов\r\n  function showAllCards(request = null) {\r\n    if (request) {\r\n      localStorage.setItem('searchString',request);\r\n    } else {\r\n      request = localStorage.getItem('searchString');\r\n    }\r\n      if (localStorage.getItem('lastFetchMovies')==='0') {\r\n        //setLoading(true);\r\n        localStorage.setItem('lastFetchMovies','1');\r\n        moviesApi.getInitialMovies()\r\n        .then((results) => {\r\n          localStorage.setItem('allMovies',JSON.stringify(results));\r\n          results = JSON.parse(localStorage.getItem('allMovies'));\r\n          mainApi.getInitialCards()\r\n          .then((res) => {\r\n            localStorage.setItem('allSavedMovies',JSON.stringify(res));\r\n            res = JSON.parse(localStorage.getItem('allSavedMovies'));\r\n            const moviesConvert = moviesForBackend(results,res,checkedShorts);\r\n            setMovies(moviesFind(moviesConvert, request))\r\n            setSavedMovies(moviesFind(moviesForSaved(res,checkedShorts), request))\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n        })\r\n        .catch(() => {\r\n          setErrorServer(true);\r\n        })\r\n       // .finally(() => {\r\n         // setLoading(false);\r\n       // });\r\n      } else {\r\n        const results = JSON.parse(localStorage.getItem('allMovies'));\r\n        const res = JSON.parse(localStorage.getItem('allSavedMovies'));\r\n        const moviesConvert = moviesForBackend(results,res,checkedShorts);\r\n        setMovies(moviesFind(moviesConvert, request))\r\n        setSavedMovies(moviesFind(moviesForSaved(res,checkedShorts), request))\r\n  }\r\n    }\r\n\r\n  //Отрисовка всех карточек в зависимости от разрешения экрана + юзера\r\n  useEffect(() => {\r\n    localStorage.setItem('searchString','');\r\n    localStorage.setItem('lastFetchMovies','0');\r\n    showAllCards();\r\n    countCard();\r\n    getUser();\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  },[]);\r\n\r\n  //Добавление фильма в сохраненные\r\n  function handleSavedMovies(movie)  {\r\n    mainApi.addSaveMovies(movie)\r\n      .then((results) => {\r\n          setSavedMovies((item) => [...item, results]);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })    \r\n      .finally(() => {\r\n        localStorage.setItem('lastFetchMovies','0');\r\n        showAllCards();\r\n      });\r\n  };\r\n\r\n  //Отрисовка всех сохраненных карточек\r\n  const handleGetSavedMovies = () => {\r\n    mainApi.getInitialCards()\r\n      .then((res) => {\r\n        setLoading(true);\r\n        setSavedMovies(res);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  //Фильтр короткого сохраненного фильма\r\n  const moviesForSaved = (movies,shorts = false) => {\r\n    let moviesList=[]\r\n    if (movies) {\r\n      moviesList = movies;\r\n      moviesList = moviesList.filter((movie) => {\r\n        return movie.owner === currentUser._id;\r\n      })\r\n      if (shorts) {\r\n        moviesList = moviesList.filter((movie) => {\r\n          return movie.duration <= 40;\r\n        })\r\n      }\r\n    }\r\n    return moviesList;\r\n  }\r\n\r\n//Удаление фильма из сохраненных\r\n  const handleDeleteMovies = (id) => {\r\n    mainApi.deleteCard(id)\r\n      .then(() => {\r\n        const newCards = savedMovies.filter((movie) => \r\n          movie._id !== id\r\n        );\r\n          setSavedMovies(newCards);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        localStorage.setItem('lastFetchMovies','0');\r\n        showAllCards();\r\n      })\r\n  };\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n          <div className=\"app\">\r\n              <Header \r\n                handleClick={handleNavPopupClick}\r\n                email={userEmail.email}\r\n                loggedIn={loggedIn}\r\n              />\r\n\r\n                <Switch>\r\n                  <Route exact path=\"/\">\r\n                    <Main \r\n                    />\r\n                  </Route>\r\n\r\n                  <ProtectedRoute\r\n                      exact\r\n                      path=\"/movies\"\r\n                      loggedIn={loggedIn}\r\n                      component={Movies} \r\n                      loading={loading}\r\n                      errorServer={errorServer}\r\n                      onUpdateForm={showAllCards}\r\n                      onClickCheckbox={handleFilterCheckbox}\r\n                      movies={movies}\r\n                      onButtonAdd={handleClickAddCards}\r\n                      countCards={countCards + moreCards}\r\n                      onSavedMovies={handleSavedMovies}\r\n                      onDeleteMovies={handleDeleteMovies}\r\n                      savedMovies={savedMovies}\r\n                      checkedShorts={checkedShorts}\r\n                    />\r\n                  \r\n                  <ProtectedRoute \r\n                      exact\r\n                      path=\"/saved-movies\"\r\n                      loggedIn={loggedIn}\r\n                      component={SavedMovies}\r\n                      savedMovies={savedMovies}\r\n                      onClickCheckbox={handleFilterCheckbox}\r\n                      onUpdateForm={showAllCards}\r\n                      onDeleteMovies={handleDeleteMovies}\r\n                      loading={loading}\r\n                      errorServer={errorServer}\r\n                      movies={savedMovies}\r\n                      checkedShorts={checkedShorts}\r\n                    />\r\n\r\n                  <ProtectedRoute \r\n                      exact\r\n                      path=\"/profile\"\r\n                      loggedIn={loggedIn}\r\n                      component={Profile}\r\n                      onUpdateUser={handleUpdateUser}\r\n                      onLogout={handleLogOut}\r\n                    />\r\n                  \r\n                  <Route path=\"/sign-in\">\r\n                    <Login \r\n                    onLogin={handleLogin}\r\n                    />\r\n                  </Route>\r\n\r\n                  <Route path=\"/sign-up\">\r\n                    <Register \r\n                    onRegister={handleRegister}\r\n                    />\r\n                  </Route>\r\n\r\n                  <Route path=\"*\">\r\n                    <PageNotFound />\r\n                  </Route>\r\n\r\n                </Switch>\r\n\r\n              <Footer />\r\n\r\n                <PopupNav\r\n                  isOpen={isNavPopup}\r\n                  onClose={closePopup}  \r\n                />\r\n                <InfoTooltip\r\n                isOpen={isInfoTooltipOpen}\r\n                onClose={closePopup}\r\n                isSuccess={isAuthSuccess}\r\n              />\r\n            </div>\r\n            </CurrentUserContext.Provider>     \r\n  )\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}